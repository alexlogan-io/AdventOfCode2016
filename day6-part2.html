<script type="text/javascript">

function readTextFile(file, callback)
{
    var rawFile = new XMLHttpRequest();
    rawFile.open("GET", file, false);
    rawFile.onreadystatechange = function ()
    {
        if(rawFile.readyState === 4)
        {
            if(rawFile.status === 200 || rawFile.status ==+ 0)
            {
                var allText = rawFile.responseText;
                callback(allText.toString());
            }
        }
    };
    rawFile.send(null);
}

readTextFile("file:///C:/Users/alexl/AdventOfCode/day6input.txt", function(file){

    var input, letters, count, message, limit;

    //input = "eedadndrvteeeandsrraavrdatevrstsrnevsdttsarasrtvnssdtsntnadasvetvetesnvtvntsndvrdeardvrsenenarar".split('');

    input = file.replace(/\s+/g,'').split('');

    letters = [];
    count = [];

    message = "";

    limit = 8;

    for (var i = 0; i < limit; i++) {
        for (var j = i; j < input.length; j+=limit) {
            if(letters.indexOf(input[j]) == -1){
                letters.push(input[j]);
                count.push(1);
            }else{
                count[letters.indexOf(input[j])] ++; 
            }
        }

        message += letters[count.indexOf(Math.min(...count))];

        letters = [];
        count = [];
    }


    alert(message);


});

</script>